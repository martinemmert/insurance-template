---
interface TocItem {
  label: string;
  href: string;
  children?: TocItem[];
}

interface Props {
  title?: string;
  items: TocItem[];
  class?: string;
}

const {
  title = 'Inhaltsverzeichnis',
  items,
  class: className
} = Astro.props;
---

<nav class:list={['toc', className]}>
  <h2 class="toc__title">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <line x1="8" y1="6" x2="21" y2="6"></line>
      <line x1="8" y1="12" x2="21" y2="12"></line>
      <line x1="8" y1="18" x2="21" y2="18"></line>
      <line x1="3" y1="6" x2="3.01" y2="6"></line>
      <line x1="3" y1="12" x2="3.01" y2="12"></line>
      <line x1="3" y1="18" x2="3.01" y2="18"></line>
    </svg>
    {title}
  </h2>
  <ol class="toc__list">
    {items.map(item => (
      <li>
        <a href={item.href}>{item.label}</a>
        {item.children && item.children.length > 0 && (
          <ol class="toc__list toc__list--nested">
            {item.children.map(child => (
              <li><a href={child.href}>{child.label}</a></li>
            ))}
          </ol>
        )}
      </li>
    ))}
  </ol>
</nav>

<style>
  .toc {
    background: #f8f7f5;
    border-radius: 1rem;
    padding: 2rem 2.5rem;
    margin: 2rem 1.5rem;
  }

  .toc__title {
    font-size: 1rem;
    font-weight: 700;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .toc__list {
    list-style: none;
    counter-reset: toc;
  }

  .toc__list li {
    counter-increment: toc;
    margin-bottom: 0.5rem;
  }

  .toc__list a {
    display: flex;
    align-items: baseline;
    gap: 0.75rem;
    color: #555;
    text-decoration: none;
    font-size: 0.9375rem;
    transition: color 0.2s;
  }

  .toc__list a:hover {
    color: #1a4d2e;
  }

  .toc__list a::before {
    content: counter(toc) ".";
    font-weight: 600;
    color: #1a4d2e;
    min-width: 1.5rem;
  }

  .toc__list--nested {
    margin-left: 2.25rem;
    margin-top: 0.5rem;
  }

  .toc__list--nested a::before {
    content: "â€“";
    color: #999;
  }
</style>
