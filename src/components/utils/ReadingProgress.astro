---
interface Props {
  class?: string;
}

const { class: className } = Astro.props;
---

<div class:list={['reading-progress', className]} id="readingProgress"></div>

<script>
  const progressBar = document.getElementById('readingProgress');

  if (progressBar) {
    window.addEventListener('scroll', () => {
      const scrollTop = window.scrollY;
      const docHeight = document.documentElement.scrollHeight - window.innerHeight;
      const progress = (scrollTop / docHeight) * 100;
      progressBar.style.width = `${Math.min(100, Math.max(0, progress))}%`;
    });
  }
</script>

<style>
  .reading-progress {
    position: fixed;
    top: 0;
    left: 0;
    width: 0%;
    height: 3px;
    background: linear-gradient(90deg, #1a4d2e, #2d6b45);
    z-index: 101;
    transition: width 0.1s;
  }
</style>
